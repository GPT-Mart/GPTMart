<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>GPTMart — Curated Custom GPTs</title>
<meta name="description" content="A lightning‑fast, keyboard‑driven directory of my best Custom GPTs. Search, filter, feature, and manage — all in one file." />
<meta name="theme-color" content="#0b0f19" />
<meta name="color-scheme" content="dark" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
<meta property="og:title" content="GPTMart — Curated Custom GPTs" />
<meta property="og:description" content="A lightning‑fast, keyboard‑driven directory of my best Custom GPTs." />
<meta property="og:type" content="website" />
<meta property="og:image" content="https://avatars.githubusercontent.com/u/9919?s=200&v=4" />


<!-- Analytics (kept, with settings override) -->
<script>
window.GA_MEASUREMENT_ID = window.GA_MEASUREMENT_ID || 'G-ZNB7MWLE99';
window.dataLayer = window.dataLayer || [];
function gtag(){ dataLayer.push(arguments); }
</script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-ZNB7MWLE99"></script>
<script> gtag('js', new Date()); gtag('config', window.GA_MEASUREMENT_ID); </script>


<style>
:root{
--bg:#050815; --bg-2:#080e1f; --bg-3:#0b142a;
--card:#0c1327; --card-2:#0e162f; --panel:#0b1a36;
--text:#e6ecff; --muted:#a9b4c7; --accent:#6ea8ff; --accent-2:#3b82f6;
--ok:#22c55e; --warn:#f59e0b; --danger:#ef4444;
--stroke:#16213a; --glow:0 0 0 2px rgba(110,168,255,.15), 0 30px 120px -40px rgba(60,120,255,.35);
--radius:14px; --radius-lg:18px; --shadow:0 10px 40px rgba(0,0,0,.35);
}
*{box-sizing:border-box}
html,body{height:100%;margin:0}
body{font-family:Inter,ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial; background:radial-gradient(1200px 600px at 80% -10%,#12244c22 0,#0000 70%), linear-gradient(180deg,var(--bg),#091229 60%, #0a1333 100%); color:var(--text);}
a{color:inherit}
.container{width:95%;max-width:1200px;margin:0 auto}
.visually-hidden{position:absolute!important;clip:rect(1px,1px,1px,1px);padding:0;border:0;height:1px;width:1px;overflow:hidden;}


/* Topbar */
.topbar{position:sticky;top:0;z-index:50;background:rgba(5,8,21,.65);backdrop-filter:blur(10px);border-bottom:1px solid var(--stroke)}
.top-row{display:flex;align-items:center;gap:12px;justify-content:space-between;padding:12px 0}
.brand{display:flex;align-items:center;gap:10px;font-weight:800;letter-spacing:.2px}
.brand svg{filter:drop-shadow(0 4px 18px rgba(110,168,255,.45))}
.nav{display:flex;gap:8px}
.chip{border:1px solid var(--stroke);background:linear-gradient(180deg,#0b1327,#091226);padding:8px 12px;border-radius:999px;color:#cbd5e1;text-decoration:none}
.chip.active{background:linear-gradient(180deg,#1b2a55,#13224b);border-color:#21408b;box-shadow:var(--glow)}
.btn{background:linear-gradient(180deg,#1b2a55,#142447);border:1px solid #1a2b5a;padding:10px 14px;border-radius:12px;color:#e7efff;text-decoration:none;font-weight:700;display:inline-flex;align-items:center;gap:8px;box-shadow:0 6px 24px rgba(0,0,0,.25)}
.btn:hover{border-color:#264890}
.btn.accent{background:linear-gradient(180deg,#2c57c7,#2549a8);border-color:#2e53b7;box-shadow:0 6px 28px rgba(59,130,246,.35)}


/* Sections */
.section{padding:30px 0}


/* Hero */
.hero{display:grid;grid-template-columns:1.2fr .8fr;gap:24px;align-items:end}
@media (max-width:900px){.hero{grid-template-columns:1fr}}
.hero h1{margin:0;font-size:clamp(30px,4vw,44px);line-height:1.05}
.hero p{color:var(--muted);margin:.4rem 0 0}
.hero-card{background:linear-gradient(180deg,#0e1733,#0b1228);border:1px solid var(--stroke);border-radius:var(--radius-lg);padding:16px;box-shadow:var(--shadow)}
.quick{display:flex;gap:10px;flex-wrap:wrap;margin-top:10px}
.quick .k{border:1px dashed #27407a;color:#bcd2ff;padding:6px 10px;border-radius:999px;font-size:12px}


/* Search ribbon */
.ribbon{margin-top:10px;display:grid;grid-template-columns:1fr 200px 200px auto;gap:8px}
@media (max-width:900px){.ribbon{grid-template-columns:1fr 1fr}}
.input{border:1px solid var(--stroke);background:linear-gradient(180deg,#091327,#071022);border-radius:12px;padding:12px 14px;color:var(--text)}
.input::placeholder{color:#8aa0c2}


/* Languages strip */
.langs{display:flex;flex-wrap:wrap;gap:14px;align-items:center;margin:16px 0}
.lang{display:grid;justify-items:center;gap:6px;text-decoration:none}
.lang img{width:44px;height:44px;border-radius:10px;background:#0a1324;border:1px solid var(--stroke);padding:8px;transition:transform .15s}
.lang:hover img{transform:translateY(-2px) scale(1.05)}
.lang span{font-size:12px;color:#cbd5e1}


/* Grid */
.grid{display:grid;grid-template-columns:repeat(12,1fr);gap:16px;margin-top:16px}
.col{grid-column:span 3}
@media (max-width:1100px){.col{grid-column:span 4}}
@media (max-width:800px){.col{grid-column:span 6}}
@media (max-width:560px){.col{grid-column:span 12}}
.card{background:linear-gradient(180deg,var(--card),var(--card-2));border:1px solid var(--stroke);border-radius:var(--radius);padding:14px;display:flex;flex-direction:column;gap:10px;box-shadow:var(--shadow);position:relative}
.card:hover{box-shadow:0 20px 80px rgba(60,120,255,.15)}
.icon{width:48px;height:48px;border-radius:10px;overflow:hidden;border:1px solid #1f2937;background:#0a1324}
.icon img{width:100%;height:100%;object-fit:cover}
}
  /*************** ADMIN ***************/
  const adminGate = $('#adminGate');
  const adminDesk = $('#adminDesk');

  function isAdmin(){ return sessionStorage.getItem(SESSION_ADMIN)==='1'; }
  function requireAdmin(){ if(isAdmin()){ adminGate.classList.add('hide'); adminDesk.classList.remove('hide'); renderAdmin(); } else { adminGate.classList.remove('hide'); adminDesk.classList.add('hide'); } }

  $('#pinGo').addEventListener('click', ()=>{ const entered = ($('#pin').value||'').trim(); if(entered===ADMIN_PIN){ sessionStorage.setItem(SESSION_ADMIN,'1'); requireAdmin(); } else alert('Access denied'); });

  function renderAdmin(){
    const it = items();
    $('#kLive').textContent   = it.filter(x=>x.status==='live').length;
    $('#kHidden').textContent = it.filter(x=>x.status==='hidden').length;
    $('#kFeat').textContent   = it.filter(x=>x.featured && x.status==='live').length;

    const q = ($('#aQ').value||'').trim();
    const st = $('#aStatus').value||'all';
    const filtered = it.filter(x=>{ const inQ = !q || [x.title,x.desc,toCSV(x.tags),toCSV(x.categories)].some(v=>contains(v,q)); const inS = st==='all' || x.status===st; return inQ && inS; });

    $('#tAll').innerHTML = filtered.map((x)=>{
      const i = it.indexOf(x);
      return `<tr>
        <td>${x.title}</td>
        <td><small>${toCSV(x.categories)}</small><br><small style="color:#93c5fd">${toCSV(x.tags)}</small></td>
        <td>${x.featured? '⭐️' : '—'}</td>
        <td>${x.status}</td>
        <td>
          <button class="btn" data-edit="${i}">Edit</button>
          <button class="btn" data-togglef="${i}">${x.featured?'Unfeature':'Feature'}</button>
          <button class="btn" data-toggleh="${i}">${x.status==='hidden'?'Unhide':'Hide'}</button>
          <a class="btn accent" href="${x.url}" target="_blank">Open</a>
          <button class="btn" data-del="${i}" style="border-color:#2b2b2b">Delete</button>
        </td>
      </tr>`;
    }).join('');

    $$('#tAll [data-edit]').forEach(b=> b.addEventListener('click', ()=> openModal(+b.dataset.edit)));
    $$('#tAll [data-togglef]').forEach(b=> b.addEventListener('click', ()=>{ const itms = items(); const i=+b.dataset.togglef; itms[i].featured=!itms[i].featured; setItems(itms);}));
    $$('#tAll [data-toggleh]').forEach(b=> b.addEventListener('click', ()=>{ const itms = items(); const i=+b.dataset.toggleh; itms[i].status = itms[i].status==='hidden'?'live':'hidden'; setItems(itms);}));
    $$('#tAll [data-del]').forEach(b=> b.addEventListener('click', ()=>{ const itms=items(); itms.splice(+b.dataset.del,1); setItems(itms);}));
  }

  // Filters (admin)
  $('#aQ').addEventListener('input', renderAdmin);
  $('#aStatus').addEventListener('change', renderAdmin);
  $('#aReset').addEventListener('click', ()=>{ $('#aQ').value=''; $('#aStatus').value='all'; renderAdmin(); });

  // Export / Import
  $('#exportBtn').addEventListener('click', ()=>{
    const data = { items: items(), settings: settings() };
    const blob = new Blob([JSON.stringify(data,null,2)], {type:'application/json'});
    const a = document.createElement('a'); a.href = URL.createObjectURL(blob); a.download = 'gptmart-export.json'; a.click();
  });
  $('#importFile').addEventListener('change', (e)=>{
    const file = e.target.files[0]; if(!file) return;
    const reader = new FileReader(); reader.onload = ()=>{
      try{
        const data = JSON.parse(reader.result);
        if(Array.isArray(data.items)) write(LS_ITEMS, data.items);
        if(data.settings){ const curr = settings(); write(LS_SETTINGS, { title: data.settings.title || curr.title, ga: data.settings.ga || curr.ga }); }
        renderAll(); alert('Imported!');
      }catch(err){ alert('Invalid file'); }
    };
    reader.readAsText(file);
  });

  // Settings
  $('#saveSettings').addEventListener('click', ()=>{
    const s = settings();
    s.title = $('#siteTitle').value.trim() || s.title;
    s.ga = $('#gaId').value.trim() || s.ga;
    setSettings(s);
    alert('Settings saved');
  });

  // Modal
  $('#addManual').addEventListener('click', ()=> openModal());
  function openModal(editIndex){
    const itms = items();
    const editing = typeof editIndex==='number'? itms[editIndex] : null;
    $('#mTitle').textContent = editing? 'Edit GPT' : 'Add GPT';
    $('#mTitleIn').value = editing?.title || '';
    $('#mUrlIn').value = editing?.url || '';
    $('#mIconIn').value = editing?.icon || '';
    $('#mDescIn').value = editing?.desc || '';
    $('#mCatsIn').value = toCSV(editing?.categories);
    $('#mTagsIn').value = toCSV(editing?.tags);
    $('#mFeatIn').checked = !!editing?.featured;
    $('#mStatusIn').value = editing?.status || 'live';
    $('#modal').showModal();
    $('#mSave').onclick = ()=>{
      const item = {
        title: $('#mTitleIn').value.trim(),
        url: $('#mUrlIn').value.trim(),
        icon: $('#mIconIn').value.trim(),
        desc: $('#mDescIn').value.trim(),
        categories: fromCSV($('#mCatsIn').value),
        tags: fromCSV($('#mTagsIn').value),
        featured: $('#mFeatIn').checked,
        status: $('#mStatusIn').value,
        createdAt: editing?.createdAt || Date.now()
      };
      if(!item.title || !item.url){ alert('Title and URL required.'); return; }
      if(editing){ itms[editIndex] = item; setItems(itms); }
      else { itms.push(item); setItems(itms); }
      $('#modal').close();
    };
  }

  /*************** COMMAND PALETTE ***************/
  const palette = $('#palette');
  const palQ = $('#palQ');
  const palList = $('#palList');
  $('#openPalette').addEventListener('click', openPalette);
  document.addEventListener('keydown', (e)=>{
    const k = e.key.toLowerCase();
    const ctrl = e.ctrlKey || e.metaKey;
    if((ctrl && k==='k')){ e.preventDefault(); openPalette(); }
    if(k==='/' && document.activeElement!==qInput){ e.preventDefault(); qInput.focus(); }
    if(k==='escape') closePalette();
  }, true);

  function openPalette(){ palette.classList.add('open'); palQ.value=''; renderPalette(''); palQ.focus(); }
  function closePalette(){ palette.classList.remove('open'); }

  function paletteActions(){
    return [
      { label:'Add new GPT', fn: ()=>openModal(), hint:'Create an entry' },
      { label:'Export JSON', fn: ()=>$('#exportBtn').click(), hint:'Backup data' },
      { label:'Import JSON', fn: ()=>$('#importFile').click(), hint:'Restore data' },
      { label:'Go to Explore', fn: ()=>navigate('#/explore'), hint:'View mode' },
      { label:'Go to Admin', fn: ()=>navigate('#/admin'), hint:'Owner dashboard' },
      { label:'Toggle Featured on first item', fn: ()=>{ const itms=items(); if(itms[0]){ itms[0].featured=!itms[0].featured; setItems(itms);} }, hint:'Demo' },
      { label:'Clear search', fn: ()=>{ state.q=''; qInput.value=''; renderGrid(); }, hint:'Reset query' },
      { label:'Focus search', fn: ()=>{ qInput.focus(); }, hint:'Shortcut: /' },
      { label:'About', fn: ()=> alert('GPTMart — keyboard‑first directory. Built as a single HTML file.'), hint:'Info' },
    ].concat(items().slice(0,20).map(x=>({ label:`Open: ${x.title}`, fn: ()=>window.open(x.url,'_blank'), hint:x.categories?.join(', ')||'' })));
  }

  function renderPalette(q){
    const acts = paletteActions().filter(a=> contains(a.label,q) || contains(a.hint,q));
    palList.innerHTML = acts.map((a,i)=>`<div class="pal-item" role="option" data-i="${i}"><div>${a.label}</div><small style="color:var(--muted)">${a.hint||''}</small></div>`).join('');
    $$('#palList .pal-item').forEach(el=> el.onclick = ()=>{ const i=+el.dataset.i; acts[i].fn?.(); closePalette(); });
  }
  palQ.addEventListener('input', e=> renderPalette(e.target.value));
  palette.addEventListener('click', (e)=>{ if(e.target===palette) closePalette(); });

  /*************** ROUTING & SETTINGS ***************/
  function applySettings(){
    const s = settings();
    $('#ftTitle').textContent = s.title || 'GPTMart';
    $('#siteLogo').textContent = s.title || 'GPTMart';
    document.title = (s.title||'GPTMart') + ' — Curated Custom GPTs';
    window.GA_MEASUREMENT_ID = s.ga || window.GA_MEASUREMENT_ID;
    $('#siteTitle').value = s.title||'';
    $('#gaId').value = s.ga||'';
  }

  function navigate(hash){ location.hash = hash; onRoute(); }
  function onRoute(){ const h=(location.hash||'#/explore');
    $$('#top .chip').forEach(c=>c.classList.remove('active'));
    if(h.startsWith('#/admin')){ showTab('admin'); } else { showTab('explore'); }
  }

  function showTab(which){
    $$('#navExplore, #navAdmin').forEach(x=>x.classList.remove('active'));
    if(which==='admin'){ $('#navAdmin').classList.add('active'); $('#viewAdmin').classList.remove('hide'); $('#viewExplore').classList.add('hide'); requireAdmin(); }
    else { $('#navExplore').classList.add('active'); $('#viewAdmin').classList.add('hide'); $('#viewExplore').classList.remove('hide'); }
  }

  /*************** WIRING ***************/
  qInput.addEventListener('input', e=>{ state.q = e.target.value; renderGrid(); });
  $('#reset').addEventListener('click', ()=>{ state.q=''; qInput.value=''; state.cat='All'; catSelect.value='All'; sortSelect.value='featured'; state.sort='featured'; renderGrid();});
  catSelect.addEventListener('change', e=>{ state.cat = e.target.value; renderGrid(); });
  sortSelect.addEventListener('change', e=>{ state.sort = e.target.value; renderGrid(); });

  function syncPublic(){ renderCategories(); renderGrid(); renderHighlights(); $('#kpiCounts').textContent = `${items().filter(x=>x.status==='live').length} live • ${items().filter(x=>x.featured).length} featured`; }
  function renderAll(){ syncPublic(); if(isAdmin()) renderAdmin(); }

  // Init
  initData();
  renderLanguages();
  applySettings();
  renderAll();
  onRoute();

  window.addEventListener('hashchange', onRoute);

  // Light anti‑inspect (optional — keeps UX smooth)
  document.addEventListener('contextmenu', e => e.preventDefault());
  document.addEventListener('keydown', e => {
    const k = e.key.toLowerCase(); const ctrl = e.ctrlKey || e.metaKey;
    if ((ctrl && ['u','s','p'].includes(k)) || k==='f12' || (ctrl && e.shiftKey && ['i','c','j'].includes(k))) {
      e.preventDefault(); e.stopPropagation();
    }
  }, true);
  </script>
</body>
</html>

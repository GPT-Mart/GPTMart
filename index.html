<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>GPTMart ‚Äî Curated Custom GPTs</title>
  <meta name="description" content="A lightning-fast, keyboard-driven directory of the best Custom GPTs." />
  <meta name="theme-color" content="#0b0f19" />
  <meta name="color-scheme" content="dark" />
  <style>
    :root{
      --bg:#050815; --card:#0c1327; --panel:#0b1a36;
      --text:#e6ecff; --muted:#a9b4c7; --accent:#6ea8ff;
      --stroke:#16213a; --shadow:0 10px 40px rgba(0,0,0,.35);
    }
    *{box-sizing:border-box} html,body{height:100%;margin:0;font-family:Inter,system-ui;background:var(--bg);color:var(--text)}

    /* Welcome overlay */
    #welcomeOverlay{
      position:fixed;inset:0;display:grid;place-items:center;
      background:rgba(5,8,21,0.85);backdrop-filter:blur(10px);
      z-index:99;animation:fadeIn .6s ease;
    }
    @keyframes fadeIn{from{opacity:0}to{opacity:1}}
    .wel-card{
      background:linear-gradient(180deg,#0c1327,#0b1a36);
      padding:32px;border-radius:20px;border:1px solid var(--stroke);
      box-shadow:var(--shadow);width:min(92vw,500px);text-align:center;
    }
    .wel-title{font-size:26px;font-weight:800;margin:0 0 8px}
    .wel-sub{font-size:14px;color:var(--muted);margin:0 0 24px}
    .wel-input,.wel-textarea{
      width:100%;border:1px solid var(--stroke);
      background:#0b152c;color:var(--text);
      border-radius:12px;padding:12px;margin-bottom:10px;font-size:15px;
    }
    .wel-textarea{min-height:80px;resize:vertical}
    .wel-btn{background:var(--accent);border:none;border-radius:12px;
      padding:12px 16px;font-weight:700;color:white;width:100%;
      cursor:pointer;transition:.2s}
    .wel-btn:hover{opacity:.9}
    .wel-note{color:#9eb0d6;font-size:13px;margin-top:10px}
    main{display:none} /* hidden until overlay is dismissed */
  </style>
</head>
<body>
  <div id="welcomeOverlay">
    <form id="welcomeForm" class="wel-card">
      <h2 class="wel-title">Welcome to GPTMart üí´</h2>
      <p class="wel-sub">Discover, launch, and create your own AI tools. <br>Leave your email and message to stay updated.</p>
      <input type="email" id="welEmail" class="wel-input" placeholder="Your email" required>
      <textarea id="welMsg" class="wel-textarea" placeholder="Your short message..." required></textarea>
      <button type="submit" class="wel-btn">Get Started</button>
      <div class="wel-note" id="welNote"></div>
    </form>
  </div>

  <main id="mainContent">
    <h1 style="text-align:center;margin-top:100px;">üéâ Welcome to GPTMart Main Page</h1>
  </main>

  <script>
    const API_BASE = "https://connector-320f.onrender.com"; // your server URL

    function hideOverlay(){
      document.getElementById('welcomeOverlay').style.display='none';
      document.getElementById('mainContent').style.display='block';
    }

    async function submitLead(email,message){
      const payload={email,message,ua:navigator.userAgent,tz:Intl.DateTimeFormat().resolvedOptions().timeZone};
      const r=await fetch(`${API_BASE}/api/leads`,{
        method:"POST",
        headers:{"Content-Type":"application/json"},
        body:JSON.stringify(payload)
      });
      return r.ok;
    }

    document.getElementById('welcomeForm').addEventListener('submit',async(e)=>{
      e.preventDefault();
      const note=document.getElementById('welNote');
      const email=document.getElementById('welEmail').value.trim();
      const msg=document.getElementById('welMsg').value.trim();
      note.textContent="Submitting...";
      const ok=await submitLead(email,msg);
      note.textContent= ok ? "‚úÖ Thank you! Enjoy exploring GPTMart." : "‚ùå Error saving your info.";
      if(ok){localStorage.setItem('gptmart_welcome_done','yes');setTimeout(hideOverlay,700);}
    });

    if(localStorage.getItem('gptmart_welcome_done')) hideOverlay();
  </script>
</body>
</html>

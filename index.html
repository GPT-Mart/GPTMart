<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>GPTMart</title>

    <!-- Google Analytics -->
    <script>
      window.GA_MEASUREMENT_ID = "G-ZNB7MWLE99";
    </script>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-ZNB7MWLE99"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() { dataLayer.push(arguments); }
      gtag("js", new Date());
      gtag("config", window.GA_MEASUREMENT_ID);
    </script>

    <!-- Fonts & Styles -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="./style.css" />
  </head>

  <body>
    <!-- ===== HEADER ===== -->
    <header class="main-header">
      <div class="header-container">
        <h1 class="logo">GPTMart<span>.</span></h1>

        <nav class="nav-menu">
          <a href="#hero">Home</a>
          <a href="#categories">Categories</a>
          <a href="#grid">Explore</a>
          <a href="#upload">Create GPT</a>
          <a href="#contact">Contact</a>
        </nav>

        <div class="header-actions">
          <input id="searchInput" type="text" class="search-input" placeholder="Search GPTs..." />
          <a href="#login" class="login-btn">Login</a>
          <a href="#signup" class="signup-btn">Sign Up</a>
        </div>
      </div>
    </header>

    <!-- ===== HERO SECTION (Above the Fold) ===== -->
    <section id="hero" class="hero-section">
      <canvas id="particles"></canvas>
      <div class="hero-content">
        <h1>Discover, Build & Launch <span>Powerful Custom GPTs</span></h1>
        <p>Where AI Creators Meet Opportunity</p>
        <div class="hero-buttons">
          <a href="#grid" class="btn primary">Explore GPTs</a>
          <a href="#upload" class="btn secondary">Create Your GPT</a>
        </div>
      </div>
      <div class="hero-bg"></div>
    </section>

    <!-- ===== MAIN CONTENT ===== -->
    <div class="container">
      <section id="categories" class="categories"></section>
      <section id="languageIcons" class="language-icons"></section>
      <section id="grid" class="gpts-grid"></section>
    </div>

    <!-- ===== FOOTER ===== -->
    <footer class="footer">
      <p>© 2025 GPTMart — All rights reserved.</p>
      <div class="footer-links">
        <a href="#">Privacy Policy</a>
        <a href="#">Terms</a>
        <a href="#">Contact</a>
      </div>
    </footer>

    <!-- Scripts -->
    <script src="./data/gpts.js"></script>
    <script src="./app.js"></script>

    <!-- ===== PARTICLE ANIMATION ===== -->
    <script>
      const canvas = document.getElementById("particles");
      const ctx = canvas.getContext("2d");

      function heroHeight() {
        return document.querySelector(".hero-section").offsetHeight;
      }

      function resizeCanvas() {
        canvas.width = window.innerWidth;
        canvas.height = heroHeight();
      }

      window.addEventListener("resize", resizeCanvas);
      resizeCanvas();

      const prefersReducedMotion = window.matchMedia("(prefers-reduced-motion: reduce)").matches;
      const PARTICLE_COUNT = prefersReducedMotion ? 50 : 120;
      const INFLUENCE_RADIUS = 140;
      const ATTRACT_STRENGTH = 0.015;
      const BASE_DRIFT = 0.35;
      const PARALLAX = 0.02;

      const pointer = { x: canvas.width / 2, y: canvas.height / 2, active: false, px: 0.5, py: 0.5 };
      const updatePointer = (x, y) => {
        const rect = canvas.getBoundingClientRect();
        pointer.x = x - rect.left;
        pointer.y = y - rect.top;
        pointer.px = pointer.x / canvas.width;
        pointer.py = pointer.y / canvas.height;
        pointer.active = true;
      };

      window.addEventListener("mousemove", (e) => updatePointer(e.clientX, e.clientY));
      window.addEventListener("touchmove", (e) => {
        const t = e.touches[0];
        if (t) updatePointer(t.clientX, t.clientY);
      }, { passive: true });
      window.addEventListener("mouseleave", () => (pointer.active = false));
      window.addEventListener("touchend", () => (pointer.active = false));

      class Particle {
        constructor() { this.reset(true); }
        reset(randomY = false) {
          this.x = Math.random() * canvas.width;
          this.y = randomY ? Math.random() * canvas.height : canvas.height * Math.random();
          this.size = Math.random() * 2 + 0.8;
          const angle = Math.random() * Math.PI * 2;
          const speed = BASE_DRIFT * (0.4 + Math.random() * 0.8);
          this.vx = Math.cos(angle) * speed;
          this.vy = Math.sin(angle) * speed;
          this.alpha = Math.random() * 0.7 + 0.3;
        }
        update() {
          this.x += this.vx;
          this.y += this.vy;

          if (pointer.active) {
            const dx = pointer.x - this.x;
            const dy = pointer.y - this.y;
            const dist = Math.hypot(dx, dy);
            if (dist < INFLUENCE_RADIUS) {
              const f = ((INFLUENCE_RADIUS - dist) / INFLUENCE_RADIUS) * ATTRACT_STRENGTH;
              this.vx += dx * f;
              this.vy += dy * f;
            }
          } else {
            const cx = canvas.width * 0.5, cy = canvas.height * 0.5;
            this.vx += (cx - this.x) * 0.00002;
            this.vy += (cy - this.y) * 0.00002;
          }

          if (this.x < -10) this.x = canvas.width + 10;
          if (this.x > canvas.width + 10) this.x = -10;
          if (this.y < -10) this.y = canvas.height + 10;
          if (this.y > canvas.height + 10) this.y = -10;
        }
        draw() {
          ctx.beginPath();
          ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
          const hue = 200 + (this.y / canvas.height) * 60;
          ctx.fillStyle = `hsla(${hue}, 100%, 60%, ${this.alpha})`;
          ctx.fill();
        }
      }

      const particles = Array.from({ length: PARTICLE_COUNT }, () => new Particle());

      function animate() {
        const px = (pointer.px - 0.5) * PARALLAX * canvas.width;
        const py = (pointer.py - 0.5) * PARALLAX * canvas.height;

        ctx.clearRect(0, 0, canvas.width, canvas.height);
        ctx.save();
        ctx.translate(px, py);
        for (const p of particles) { p.update(); p.draw(); }
        ctx.restore();
        requestAnimationFrame(animate);
      }
      animate();
    </script>
  </body>
</html>
